<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>Navigation Vimâ€¯: la vie aprÃ¨s HJKL</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
  </head>
  <body>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse

---
layout: false

# Navigation Vimâ€¯:<br> la vie aprÃ¨s HJKL
Vim, Neovim, Doom-Emacs, Kakoune, Helixâ€¦

1. [les dÃ©placements](#7)
2. [les dispositions optimisÃ©es](#16)
3. [manipulation de <i>text-objects](#27)</i>
5. [navigation dans un projet](#32)

.footnote[:kazÃ© / [@fabi1cazenave](https://github.com/fabi1cazenave)]


---
## PrÃ©requisâ€¯: Ã©dition modale

---
continued: true

- <kbd>Esc</kbd> **normal**Â : afficher et manipuler du texte
- <kbd>v</kbd> **visuel**Â : visualiser une sÃ©lection de texte
- <kbd>i</kbd> **insertion**Â : ajouter (et supprimer) du texte
- <kbd>:</kbd> **commande**Â : options et commandes complexes

---
continued: true

On passe lâ€™essentiel du temps en mode *normal*â€¯:

- organisation, reformatageâ€¦
- **dÃ©placements** dans un document
- **navigation** dans une base de code

---
## PrÃ©requisâ€¯: flÃ¨ches, souris

---
continued: true

![no](images/no.jpg)

---
template: inverse

# Les dÃ©placements

![ADM-3A](images/adm-3a-keyboard.jpg)

---
## Lâ€™hÃ©ritage

Standard ASCII (1963)â€¯:

- <kbd>Ctrl</kbd>-<kbd>h</kbd> = Backspace
- <kbd>Ctrl</kbd>-<kbd>j</kbd> = Line Feed

<img style="float: right; width: 50%;" src="images/adm-3a.jpg">

Terminal [ADM-3A](https://en.wikipedia.org/wiki/ADM-3A#Legacy) (1976)â€¯:

- <kbd>Ctrl</kbd>-<kbd>k</kbd> = Up
- <kbd>Ctrl</kbd>-<kbd>l</kbd> = Right
- <kbd>Ctrl</kbd>-<kbd>^</kbd> = Home
- <kbd>Ctrl</kbd>-<kbd>z</kbd> = Clear Screen

---
## HJKL â¤ï¸

= commandes **positionnelles** de dÃ©placementâ€¯:
- quasi en homerow (position dactylo)
- bien plus efficaces que les flÃ¨ches ou la souris en mode *normal*

Ã‡a fonctionne avec dâ€™autres applicationsÂ :
- <kbd>j</kbd><kbd>k</kbd>Â : gmail, Xitter, emacs, screen, less/more/mostâ€¦
- <kbd>h</kbd><kbd>j</kbd><kbd>k</kbd><kbd>l</kbd>Â : i3/Sway (*ahem*), Niri, Ranger/Yazi, NetHackâ€¦

<small>Nota, les GUIs ont aussi des commandes positionnellesâ€¯:<br>
  <kbd>Ctrl</kbd>-<kbd>z</kbd><kbd>x</kbd><kbd>c</kbd><kbd>v</kbd> (â‰  sÃ©mantiques)</small>
---
## JK, vraimentÂ ?

TL;PLÂ : oui, avec modÃ©ration (= sans rÃ©pÃ©titions)

- <kbd>/</kbd>, <kbd>?</kbd>Â : rechercher vers le haut / vers le bas (+ <kbd>n</kbd>, <kbd>N</kbd>)
- <kbd>*</kbd>, <kbd>#</kbd>Â : idem, avec le mot sous le curseur (PRO-TIPÂ !)
- <kbd>{</kbd>, <kbd>}</kbd>Â : sauter Ã  la ligne vide prÃ©cÃ©dente / suivante
- <kbd>g</kbd><kbd>g</kbd>, <kbd>G</kbd>Â : sauter en dÃ©but / fin de fichier

`~/.vimrc`
```vim
    " recherche incrÃ©mentale
    set hlsearch
    set incsearch
```

---
## HL, vraimentÂ ?

Mouahahahahaha, nope.

- <kbd>w</kbd>, <kbd>b</kbd>Â : mot suivant / prÃ©cÃ©dent
- <kbd>W</kbd>, <kbd>B</kbd>Â : MOT suivant / prÃ©cÃ©dent
  <small>(= dÃ©limitÃ© par des espaces)</small>
- <kbd>e</kbd>, <kbd>g</kbd><kbd>e</kbd>Â : fin de mot suivant / prÃ©cÃ©dent
- <kbd>E</kbd>, <kbd>g</kbd><kbd>E</kbd>Â : fin de MOT suivant / prÃ©cÃ©dent
  <small>(= dÃ©limitÃ© par des espaces)</small>
- <kbd>^</kbd>, <kbd>$</kbd>Â : dÃ©but / fin de ligne

---
continued: true

**Tipâ€¯:** corriger mot par mot plutÃ´t que caractÃ¨re par caractÃ¨re fait
progresser en dactylo, rÃ©duisant ainsi les erreurs.

---
## Mieux que WBEâ€¯?

Pour Ã©viter les rÃ©pÃ©titions de <kbd>w</kbd>, <kbd>b</kbd>, <kbd>e</kbd>â€¦

- <kbd>f</kbd>Ã—, <kbd>F</kbd>Ã—Â : chercher la lettre [Ã—] suivante / prÃ©cÃ©dente
- <kbd>t</kbd>Ã—, <kbd>T</kbd>Ã—Â : atteindre la lettre [Ã—] suivante / prÃ©cÃ©dente
- <kbd>;</kbd>, <kbd>,</kbd>â€¯: occurrence suivante / prÃ©cÃ©dente

---
continued: true

Greffons utilesâ€¯:

- Vimâ€¯: [EasyMotion](https://github.com/easymotion/vim-easymotion) <br>
  <small></sma>Fanf,ingTastic;, sneak, improvedft, clever-f, vim-extended-ftâ€¦</small>
- Neovimâ€¯: [flash](https://github.com/folke/flash.nvim),
    [leap](https://github.com/ggandor/leap.nvim)
- Kakouneâ€¯: [Hop.kak](https://github.com/hadronized/hop.kak)

TL;PLâ€¯: <kbd>s</kbd> remplace <kbd>f</kbd> et <kbd>t</kbd> de faÃ§on
bidirectionnelle et non limitÃ©e Ã  la ligne courante (Vimium-like).

---
## 8 mouvements indispensables

Les indispensables, verticalementÂ :

- <kbd>j</kbd>, <kbd>k</kbd>Â : ligne Ã  ligne
- <kbd>/</kbd>, <kbd>?</kbd>Â : recherche

Les indispensables, horizontalementÂ :

- <kbd>w</kbd>, <kbd>b</kbd>Â : mot Ã  mot
- <kbd>^</kbd>, <kbd>$</kbd>Â : dÃ©but / fin de ligne

Tous les autresÂ :

`:help navigation`

---
template: inverse

# HJKL et dispos optimisÃ©es

![Ergoâ€‘L](images/ergol_altgr.svg)

Dvorak, BÃ©po, Ergolâ€¦

---
## Dispositions optimisÃ©es

- Dvorak (1936), [BÃ©po](https://bepo.fr)â€¦
  - contexte = machines Ã  Ã©crire + optimisation naÃ¯ve
  - â‡’ favoriser lâ€™alternance des mains
- Colemak (2006), Workman, [Ergol](https://ergol.org)â€¦
  - contexte = claviers informatique + optimisation poussÃ©e
  - â‡’ favoriser les roulements et enchaÃ®nements
  - â‡’ prÃ©server les raccourcis usuels <small>(copier, collerâ€¦)</small>

---
continued: true

ProblÃ¨meâ€¯:

- aucune ne prÃ©serve un pavÃ© <kbd>h</kbd><kbd>j</kbd><kbd>k</kbd><kbd>l</kbd>
- <kbd>j</kbd> et <kbd>k</kbd> sont deux des quatre lettres les plus rares <br>
  en franÃ§ais et en anglais

---
## Remapper HJKL

![BÃ©po vim](images/vim-bepo-066.png)

---
## Remapper HJKL

![no](images/no.jpg)

---
## Ne PAS remapper HJKLâ€¯!

Pourquoiâ€¯?
- remapper <kbd>c</kbd><kbd>t</kbd><kbd>s</kbd><kbd>r</kbd> (BÃ©po) ou
  <kbd>l</kbd><kbd>r</kbd><kbd>t</kbd><kbd>i</kbd> (Ergol) dÃ©place
  des commandes **sÃ©mantiques**
- les dÃ©placements Vim ne se limitent pas Ã 
<kbd>h</kbd><kbd>j</kbd><kbd>k</kbd><kbd>l</kbd>
- seuls <kbd>j</kbd><kbd>k</kbd> sont rÃ©ellement utiles en *homerow*

---
continued: true

Constat aprÃ¨s ~15â€¯ans dâ€™ateliers Vimâ€¯:
- remapper ralentit fortement lâ€™apprentissage
- beaucoup de vimistes <small>(et quasi tous les BÃ©poÃ¨tesâ€¦)</small><br>
  sont limitÃ©s aux dÃ©placements case-Ã -case

---
## Alternativeâ€¯: layer de navigation

![Arsenik/Selenium](images/vim_navigation.svg)

- [Kanata](https://github.com/jtroo/kanata) +
  [Arsenik](https://github.com/OneDeadKey/arsenik)/Selenium cÃ´tÃ© PC (software)
- QMK / ZMK / Keyberon cÃ´tÃ© clavier (firmware)
- â” disponible pour toutes les applications
- â” recommandÃ© *aussi* en Qwerty / Azerty

---
## Alternativeâ€¯: disposition *ergonomique*

![Ergoâ€‘L](images/ergol_altgr.svg)

- [Ergol](https://ergol.org) a `+`/`-` en <kbd>AltGr</kbd>-<kbd>[j]</kbd>/<kbd>[k]</kbd>
  <br> <small>= quasi-Ã©quivalent Ã  <kbd>j</kbd> <kbd>k</kbd> </small>
  <br> <small>+ commandes de dÃ©placements en <kbd>AltGr</kbd> + main gauche</small>
- BÃ©polar = adaptation de BÃ©po avec le <kbd>AltGr</kbd> dâ€™Ergol
- on peut utiliser [Kalamine](https://github.com/OneDeadKey/kalamine) pour modifier sa dispo

---
## Mappings utiles

Pour les dispos optimisÃ©esâ€¯:
- Ergol, BÃ©poâ€¯: inverser <kbd>,</kbd> et <kbd>;</kbd>
- Ergolâ€¯: mapper <kbd>+</kbd> et <kbd>-</kbd> sur <kbd>gj</kbd> et <kbd>gk</kbd>.
- BÃ©poâ€¯: mapper <kbd>Ã©</kbd> sur <kbd>w</kbd>.

Dans le cas gÃ©nÃ©ralâ€¯:
- mapper <kbd>U</kbd> sur <kbd>Ctrl</kbd>-<kbd>r</kbd>
- mapper <kbd>Backspace</kbd> sur <kbd>Ctrl</kbd>-<kbd>w</kbd> en mode insertion

---
## TÃ©moignage

> AprÃ¨s une semaine de test y a pas photoâ€¯: ne pas utiliser <kbd>h</kbd> et <kbd>l</kbd> câ€™est le piedâ€¯!
>
> Le fait de ne pas remapper les touches par dÃ©faut en Ergoâ€‘L est LE *game changer*â€¯:
> Ã§a facilite Ã©normÃ©ment lâ€™apprentissage sans avoir Ã  se dire Â«â€¯ah mais ce truc,
> Ã§a se fait comment avec mes mappingsâ€¯?â€¯Â».
>
> Jâ€™ai plus progressÃ© en Vim en quelques jours grÃ¢ce Ã  Ã§a quâ€™en quelques annÃ©es
> avec mes mappings BÃ©po hasardeux.

â€” [Vincent Jousse](https://ergol.org/articles/vim_pour_les_ergonautes/vjousse),
auteur de [Vim pour les humains](https://vimebook.com/fr)

---
template: inverse

# Les text-objects

![colvert](images/flying_mallard.jpg)

---
## text-objectsâ€¯: dÃ©finition

`modifieur objet`

ModifieurÂ :
- <kbd>i</kbd>, <kbd>a</kbd>Â :  â€œinâ€ ou â€œaroundâ€

ObjetÂ :
- <kbd>w</kbd>, <kbd>W</kbd>Â : mot
- <kbd>s</kbd>, <kbd>p</kbd>Â : phrase, paragraphe (point / ligne vide)
- <kbd>b</kbd>, <kbd>B</kbd>Â : bloc (parenthÃ¨ses / accolades)
- <kbd>t</kbd>Â : tag (html/xml)
- <kbd>[</kbd><kbd>]</kbd>, <kbd>{</kbd><kbd>}</kbd>, <kbd>(</kbd><kbd>)</kbd>, <kbd>'</kbd>, <kbd>"</kbd>â€¦

---
## text-objectsâ€¯: utilisation

`opÃ©rateur modifieur objet`

- <kbd>v</kbd><kbd>a</kbd><kbd>w</kbd>Â : sÃ©lectionne le mot
- <kbd>d</kbd><kbd>a</kbd><kbd>w</kbd>Â : supprime le mot
- <kbd>d</kbd><kbd>i</kbd><kbd>p</kbd>Â : supprime le paragraphe <br> (*sans* la ligne de sÃ©paration)
- <kbd>d</kbd><kbd>a</kbd><kbd>p</kbd>Â : supprime le paragraphe <br> (*avec* la ligne de sÃ©paration)
- <kbd>c</kbd><kbd>i</kbd><kbd>'</kbd>Â : change le contenu dâ€™une chaÃ®ne

BonusÂ : <kbd>.</kbd> pour rÃ©pÃ©ter lâ€™action, encore et derechef.

**DÃ©moâ€¯!**

---
## Greffons

Pour ajouter de nouveaux text-objects dans Vimâ€¯:

- [vim-textobj-user](https://github.com/kana/vim-textobj-user)
- [targets.vim](https://github.com/wellle/targets.vim)
- [vim-indent-object](https://github.com/michaeljsmith/vim-indent-object)

Dans Neovimâ€¯:

- [nvim-treesitter-textobjects](https://github.com/nvim-treesitter/nvim-treesitter-textobjects)

---
## PoÃ©sie minimaliste

> On nâ€™appuie pas sur des raccourcis clavier.
>
> On discute avec Vim.
>
> On lui adresse des demandes prÃ©cises sur quoi effectuer avec quel morceau.
>
> Tout ceci de maniÃ¨re annulable, rÃ©pÃ©table, factorisable, partageableâ€¯!

[@delapouite](https://twitter.com/Delapouite) â€“ auteur de
[Â«Â Vim en 10 vimutesÂ Â»](http://delapouite.com/slides/vim-en-10-vimutes/#/vimutes)
<br><small>(+ Jim Dennis,
[â€œYour problem with Vim is that you donâ€™t grok viâ€](https://stackoverflow.com/a/1220118/3001761))
</small>

Objectif = Â«â€¯touch-typerâ€¯Â» lâ€™Ã©dition de code.

---
template: inverse

# Navigation projet

![plein de coincoins](images/multi_ducks.webp)

Comment passer dâ€™un fichier Ã  un autreâ€¯?

---
## Panneau latÃ©ral

- ergonomie classique Visual Studio &amp; co
- [NERDTree](https://github.com/preservim/nerdtree) (Vim),
  [Neo-Tree](https://github.com/nvim-neo-tree/neo-tree.nvim) (Neovim)

![NERDTree](images/nerdtree.png)

---
## Panneau latÃ©ral

![no](images/no.jpg)

---
## PAS de panneau latÃ©ralâ€¯!

Ce type dâ€™ergonomie se prÃªte mal Ã  Vimâ€¯:
- nÃ©cessite beaucoup de dÃ©placements avant dâ€™atteindre lâ€™item
  <small>(sauf Ã  utiliser la souris, mais plutÃ´t mourir)</small>
- difficilement compatible avec la notion de fenÃªtres Vim

---
continued: true

Alternativeâ€¯:
- activer la sÃ©lection de fichier Ã  la demande
  <br><small>â€“ soit dans la fenÃªtre courante</small>
  <br><small>â€“ soit dans une nouvelle fenÃªtre</small>
  <br><small>â€“ soit dans une fenÃªtre flottante</small>
- faciliter le passage dâ€™un buffer Ã  lâ€™autre
  <br>plutÃ´t que multiplier les fenÃªtres

---
## [Ranger](https://github.com/ranger/ranger)

Un explorateur de fichiers en TUI (Python)
- affichage en [colonnes de Miller](https://fr.wikipedia.org/wiki/Colonnes_de_Miller)â€¯:
  parent, courant, prÃ©visu
- navigation avec HJKL â¤ï¸

Alternatives asynchronesâ€¯:
- minimalisteâ€¯: [lf](https://github.com/gokcehan/lf) (Go)
- Ã©tendueâ€¯: [Yazi](https://github.com/sxyazi/yazi) (Rust) ğŸ¦†

IntÃ©gration dans (Neo)Vim via lâ€™API `:term`
- alternative facileâ€¯:
[fabi1cazenave/TermOpen.vim](https://github.com/fabi1cazenave/termopen.vim)

**DÃ©moâ€¯!**

---
## Fuzzy-matching

= filtrer une liste de chaÃ®nes par quelques caractÃ¨res
- implÃ©mentation la plus connueâ€¯:
    [fzf](https://github.com/junegunn/fzf) <small>(Go)</small>
- alternatives :
    [fzy](https://github.com/jhawthorn/fzy) <small>(C)</small>,
    [skim](https://github.com/lotabout/skim) <small>(Rust)</small>,
    [peco](https://github.com/peco/peco) <small>(Go)</small>,
    [pick](https://github.com/mptre/pick) <small>(C)</small>,
    [selecta](https://github.com/garybernhardt/selecta) <small>(Ruby)</small>,
    [icepick](https://github.com/felipesere/icepick) <small>(Rust)</small>,
    [hf](https://github.com/hugows/hf) <small>(Go)</small>â€¦
- utilisation dans le terminalâ€¦ ou depuis Vim

Greffons pour filtrer des fichiers, buffers, textesâ€¦â€¯:

- Vimâ€¯: [fzf.vim](https://github.com/junegunn/fzf.vim)
- Neovimâ€¯: [telescope.nvim](https://github.com/nvim-telescope/telescope.nvim)
- Helixâ€¯: inclus

---
## Fuzzy-matchingâ€¯: telescope.nvim

Neovim + [kickstart.nvim](https://github.com/nvim-lua/kickstart.nvim)â€¯:

- <kbd>Espace</kbd><kbd>s</kbd><kbd>f</kbd>â€¯: [s]earch [f]iles
- <kbd>Espace</kbd><kbd>g</kbd><kbd>f</kbd>â€¯: search [g]it [f]iles
- <kbd>Espace</kbd><kbd>?</kbd>â€¯: fichiers rÃ©cents
- <kbd>Espace</kbd><kbd>/</kbd>â€¯: recherche dans le buffer courant
- <kbd>Espace</kbd><kbd>Espace</kbd>â€¯: buffers ouverts

Le greffon indispensable pour Neovimâ€¯! â¤ï¸

**DÃ©moâ€¯!**

---
## Language Server Protocol (LSP)

Neovim + [kickstart.nvim](https://github.com/nvim-lua/kickstart.nvim)â€¯:
<small>(Telescope + Mason + lsp-configâ€¦)</small>

- <kbd>g</kbd><kbd>d</kbd>â€¯: [g]oto [d]efinition
- <kbd>g</kbd><kbd>D</kbd>â€¯: [g]oto [D]eclaration
- <kbd>g</kbd><kbd>r</kbd>â€¯: [g]oto [r]eferences
- <kbd>g</kbd><kbd>i</kbd>â€¯: [g]oto [i]mplementation
- <kbd>[</kbd><kbd>d</kbd> / <kbd>]</kbd><kbd>d</kbd>â€¯: prev / next [d]iagnostic
- <kbd>Espace</kbd><kbd>s</kbd><kbd>d</kbd>â€¯: [s]earch [d]iagnostics
- <kbd>Espace</kbd><kbd>d</kbd><kbd>s</kbd>â€¯: [d]ocument [s]ymbols

La grosse Â«â€¯nouveautÃ©â€¯Â» avec DAP et TreeSitter.
<br>Indispensable pour les dÃ©vs.

---
## Pile de sauts

Utiliser des buffers plutÃ´t que des fenÃªtres / onglets <br>
permet de profiter de la pile de sautsâ€¯:

- <kbd>Ctrl</kbd>-<kbd>o</kbd>â€¯= remonter la pile de sauts
- <kbd>Ctrl</kbd>-<kbd>i</kbd>â€¯= descendre la pile de sauts <br>
  <small>(tip Ergol: mapper <kbd>Ctrl</kbd>-<kbd>c</kbd> sur <kbd>Ctrl</kbd>-<kbd>i</kbd>)</small>
- `:ls`â€¯= liste des buffers

â¡ plus idiomatique, plus efficace

---
template: inverse

# Conclusion

![Super Coin-Coinâ€¯!](images/superduck.jpg)

---
## Navigation Vim

---
continued: true

- <kbd>j</kbd><kbd>k</kbd> oui, <kbd>h</kbd><kbd>l</kbd> bof,
  <kbd>â†</kbd><kbd>â†“</kbd><kbd>â†‘</kbd><kbd>â†’</kbd> non
<br>â€“ <small>dÃ©placements verticaux avec <kbd>{</kbd><kbd>}</kbd>, <kbd>/</kbd><kbd>?</kbd>, <kbd>*</kbd><kbd>#</kbd>â€¦ </small>
<br>â€“ <small>dÃ©placements horizontaux avec <kbd>w</kbd><kbd>b</kbd><kbd>e</kbd>, <kbd>^</kbd><kbd>$</kbd>,
      <kbd>f</kbd><kbd>F</kbd><kbd>t</kbd><kbd>T</kbd><kbd>,</kbd><kbd>;</kbd>â€¦ </small>
<br>â€“ <small>Ã©dition de <i>text-objects</i> et non de caractÃ¨res</small>
<br>â€“ <small>layer de navigation sur <kbd>Espace</kbd> avec
      [Kanata](https://github.com/jtroo/kanata) + [Arsenik](https://github.com/OneDeadKey/arsenik) </small>

---
continued: true

- fonctions avancÃ©es
<br>â€“ <small><strong>une seule fenÃªtre, plein de buffers</strong>
      <small>(et pas de panneau latÃ©ralâ€¦)</small></small>
<br>â€“ <small>sÃ©lection via fuzzy-matching</small>
<br>â€“ <small>navigation via LSP â¤ï¸ </small>
<br>â€“ <small>pile de sautsâ€¯: <kbd>Ctrl</kbd>-<kbd>o</kbd> et <kbd>Ctrl</kbd>-<kbd>i</kbd> â¤ï¸â¤ï¸ </small>

---
continued: true

- on ne remappe pas les commandes sÃ©mantiquesâ€¯!

---
continued: true

** Happy vimmingâ€¯! **
<br> https://tuppervim.org

.footnote[:kazÃ© / [@fabi1cazenave](https://github.com/fabi1cazenave)]

    </textarea>
    <script src="js/remark.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
